import{Q as v,u as P}from"./useBaseQuery-BKlTsGCs.js";import{C as x,D as m,E as b,u as _,j as s,F as o,P as j,r as l,g as N}from"./index-Bz-J4q0w.js";var R=class extends v{constructor(e,r){super(e,r)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:x()})}getOptimisticResult(e){return e.behavior=x(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,r){const{state:t}=e,c=super.createResult(e,r),{isFetching:u,isRefetching:h,isError:i,isRefetchError:a}=c,n=t.fetchMeta?.fetchMore?.direction,d=i&&n==="forward",f=u&&n==="forward",g=i&&n==="backward",p=u&&n==="backward";return{...c,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:b(r,t.data),hasPreviousPage:m(r,t.data),isFetchNextPageError:d,isFetchingNextPage:f,isFetchPreviousPageError:g,isFetchingPreviousPage:p,isRefetchError:a&&!d&&!g,isRefetching:h&&!f&&!p}}};function M(e,r){return P(e,R)}const k="https://kartinkof.club/uploads/posts/2022-05/1652635208_1-kartinkof-club-p-kartinki-subbota-ribalka-1.jpg",E=({item:e})=>{const r=e.date.slice(0,10).split("-").reverse().join("-"),t=_();return s.jsxs(o,{onClick:()=>t(`/details/${e._id}`),relativ:!0,column:!0,className:"card",children:[s.jsx(o,{absolute:!0,className:"card__fon",children:s.jsx("img",{className:"card__fon__img",src:e.img[0]?`${j}static/${e.img[0]?.url}`:k,alt:"fon"})}),s.jsxs(o,{className:"card__content",column:!0,children:[s.jsx("h4",{children:e.title}),s.jsx("p",{children:e.description}),s.jsx(o,{className:"card__author",absolute:!0,children:s.jsxs("p",{children:["Автор: ",e.userName]})}),s.jsxs(o,{className:"card__content__footer",spredV:!0,gap:10,children:[s.jsxs("p",{children:["Дата: ",r]}),s.jsxs("p",{children:["Оцінка: ",e.score]})]})]})]})},O=l.memo(({data:e,label:r,hasNextPage:t,fetchNextPage:c,isLoading:u,isFetchingNextPage:h})=>{const i=l.useRef(null);return l.useEffect(()=>{if(!t||!c)return;const a=new IntersectionObserver(n=>{n[0].isIntersecting&&c()},{threshold:1});return i.current&&a.observe(i.current),()=>{i.current&&a.unobserve(i.current)}},[t,c]),s.jsxs("div",{className:"listwrapper",children:[r&&s.jsx("h4",{className:"list__label",children:r}),s.jsxs("div",{className:"list",children:[e.map(a=>s.jsx(E,{item:a},a._id)),(u||h)&&s.jsx("div",{className:"listwrapper__loader",children:s.jsx(N,{})}),t&&s.jsx("div",{ref:i,style:{height:"1px",marginTop:"-1px"}})]})]})});export{O as L,M as u};
