import{Q as j,u as b}from"./useBaseQuery-B3mVP0wl.js";import{C as g,D as v,E as P,u as _,j as s,F as c,g as m,r as l,P as N}from"./index-Ckg3aYmc.js";var k=class extends j{constructor(e,r){super(e,r)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:g()})}getOptimisticResult(e){return e.behavior=g(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,r){const{state:t}=e,i=super.createResult(e,r),{isFetching:o,isRefetching:d,isError:n,isRefetchError:a}=i,u=t.fetchMeta?.fetchMore?.direction,h=n&&u==="forward",f=o&&u==="forward",p=n&&u==="backward",x=o&&u==="backward";return{...i,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:P(r,t.data),hasPreviousPage:v(r,t.data),isFetchNextPageError:h,isFetchingNextPage:f,isFetchPreviousPageError:p,isFetchingPreviousPage:x,isRefetchError:a&&!h&&!p,isRefetching:d&&!f&&!x}}};function C(e,r){return b(e,k)}const E="https://kartinkof.club/uploads/posts/2022-05/1652635208_1-kartinkof-club-p-kartinki-subbota-ribalka-1.jpg",R=({item:e})=>{const r=e.date.slice(0,10).split("-").reverse().join("-"),t=_();return s.jsxs(c,{onClick:()=>t(`/details/${e._id}`),relativ:!0,column:!0,className:"card",children:[s.jsx(c,{absolute:!0,className:"card__fon",children:s.jsx("img",{className:"card__fon__img",src:e.img[0]?`${m}static/${e.img[0]?.url}`:E,alt:"fon"})}),s.jsxs(c,{className:"card__content",column:!0,children:[s.jsx("h4",{children:e.title}),s.jsx("p",{children:e.description}),s.jsx(c,{className:"card__author",absolute:!0,children:s.jsxs("p",{children:["Автор: ",e.userName]})}),s.jsxs(c,{className:"card__content__footer",spredV:!0,gap:10,children:[s.jsxs("p",{children:["Дата: ",r]}),s.jsxs("p",{children:["Оцінка: ",e.score]})]})]})]})},F="https://ukrainianfishing.com.ua/wp-content/uploads/2024/10/yak-vibrati-mistse-dlya-ribalki-na-koropa.jpg",w=({item:e})=>{const r=_();return s.jsxs(c,{onClick:()=>r(`/details/${e._id}`),relativ:!0,column:!0,className:"card",children:[s.jsx(c,{absolute:!0,className:"card__fon",children:s.jsx("img",{className:"card__fon__img",src:e.img[0]?`${m}static/${e.img[0]?.url}`:F,alt:"fon"})}),s.jsxs(c,{className:"card__content",column:!0,children:[s.jsx("h4",{children:e.title}),s.jsx("p",{children:e.description}),s.jsx(c,{className:"card__author",absolute:!0,children:s.jsxs("p",{children:["Ціна: ",e.paid?.price]})}),s.jsx(c,{className:"card__content__footer",spredV:!0,gap:10,children:s.jsx("p",{children:e.paid?.title})})]})]})},O=l.memo(({data:e,label:r,hasNextPage:t,fetchNextPage:i,isLoading:o,isFetchingNextPage:d})=>{const n=l.useRef(null);return l.useEffect(()=>{if(!t||!i)return;const a=new IntersectionObserver(u=>{u[0].isIntersecting&&i()},{threshold:1});return n.current&&a.observe(n.current),()=>{n.current&&a.unobserve(n.current)}},[t,i]),s.jsxs("div",{className:"listwrapper",children:[r&&s.jsx("h4",{className:"list__label",children:r}),s.jsxs("div",{className:"list",children:[e.map(a=>s.jsx(s.Fragment,{children:a.paid?s.jsx(w,{item:a},a._id):s.jsx(R,{item:a},a._id)})),(o||d)&&s.jsx("div",{className:"listwrapper__loader",children:s.jsx(N,{})}),t&&s.jsx("div",{ref:n,style:{height:"1px",marginTop:"-1px"}})]})]})}),T=(e,r)=>{const[t,i]=l.useState(e);return l.useEffect(()=>{const o=setTimeout(()=>{i(e)},r);return()=>{clearTimeout(o)}},[e,r]),t};export{O as L,C as a,T as u};
